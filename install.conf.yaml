- defaults:
    link:
      relink: true

- clean: ['~']

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - chmod 600 ssh/config
  # create i3 configs
  - mkdir -p ~/.config/i3
  - cat config/i3/config.common config/i3/config.laptop > ~/.config/i3/config.laptop
  - cat config/i3/config.common config/i3/config.desktop > ~/.config/i3/config.desktop
  # link laptop config by default
  - test ! -e ~/.config/i3/config && ln -s config.laptop ~/.config/i3/config || true

- link:
    ~/.config/lxterminal/lxterminal.conf:
      create: true
      path: config/lxterminal/lxterminal.conf
    ~/.config/nixpkgs/config.nix:
      create: true
      path: config/nixpkgs/config.nix
    ~/.config/nixpkgs/home.nix: config/nixpkgs/home.nix
    ~/.config/nixpkgs/flake.nix: config/nixpkgs/flake.nix
    ~/.config/nixpkgs/flake.lock: config/nixpkgs/flake.lock
    ~/.config/nixpkgs/overlays: config/nixpkgs/overlays
    ~/.config/nixpkgs/packages: config/nixpkgs/packages
    ~/.config/vlc/vlcrc:
      create: true
      path: config/vlc/vlcrc
    ~/.config/zoomus.conf: config/zoomus.conf
    ~/.local/share/remmina/1579007582517.remmina:
      create: true
      path: local/share/remmina/1579007582517.remmina
    ~/.local/share/remmina/1578960944633.remmina:
      create: true
      path: local/share/remmina/1578960944633.remmina
    ~/.octaverc:
    ~/.spacemacs:
    ~/.ssh/config: ssh/config
    ~/.vimrc:
    ~/.zprofile:

- shell:
  - chmod 700 ~/.gnupg
