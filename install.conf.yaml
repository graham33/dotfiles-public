- defaults:
    link:
      relink: true

- clean: ['~']

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - chmod 600 ssh/config
  # oh-my-zsh
  - test -d ~/.oh-my-zsh || git clone https://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
  # zsh-nix-shell
  - test -d ~/.oh-my-zsh/custom/plugins/nix-shell || git clone https://github.com/chisui/zsh-nix-shell.git /home/graham/.oh-my-zsh/custom/plugins/nix-shell
  # spacemacs
  - test -d ~/.emacs.d || git clone -b develop https://github.com/syl20bnr/spacemacs ~/.emacs.d
  # create i3 configs
  - mkdir -p ~/.config/i3
  - cat config/i3/config.common config/i3/config.laptop > ~/.config/i3/config.laptop
  - cat config/i3/config.common config/i3/config.desktop > ~/.config/i3/config.desktop
  # link laptop config by default
  - test ! -e ~/.config/i3/config && ln -s config.laptop ~/.config/i3/config || true

- link:
    ~/.bash_custom:
    ~/.config/lxterminal/lxterminal.conf:
      create: true
      path: config/lxterminal/lxterminal.conf
    ~/.config/nix/nix.conf:
      create: true
      path: config/nix/nix.conf
    ~/.config/nixpkgs/config.nix:
      create: true
      path: config/nixpkgs/config.nix
    ~/.config/nixpkgs/overlays: config/nixpkgs/overlays
    ~/.config/nixpkgs/packages: config/nixpkgs/packages
    ~/.config/vlc/vlcrc:
      create: true
      path: config/vlc/vlcrc
    ~/.config/zoomus.conf: config/zoomus.conf
    ~/.direnvrc:
    ~/.gitconfig:
    ~/.gnupg/gpg.conf:
      create: true
      path: gnupg/gpg.conf
    ~/.gnupg/gpg-agent.conf:
      create: true
      path: gnupg/gpg-agent.conf
    ~/.local/share/remmina/1579007582517.remmina:
      create: true
      path: local/share/remmina/1579007582517.remmina
    ~/.local/share/remmina/1578960944633.remmina:
      create: true
      path: local/share/remmina/1578960944633.remmina
    ~/.octaverc:
    ~/.oh-my-zsh/custom/themes/robbyrussell.zsh-theme:
      path: oh-my-zsh/custom/themes/robbyrussell.zsh-theme
      create: true
    ~/.profile:
    ~/.spacemacs:
    ~/.ssh/config: ssh/config
    ~/.tmux.conf:
    ~/.vimrc:
    ~/.zprofile:
    ~/.zshrc:

- shell:
  - chmod 700 ~/.gnupg
